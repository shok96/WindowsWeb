# Гайд разработчика

## Роль и ответственность

Разработчик отвечает за:
- Реализацию функциональности по плану архитектора
- Написание кода с SAL-аннотациями
- Соблюдение контрактов компонентов
- Обновление кода в соответствии с архитектурой

## Workflow разработчика

### 1. Получение задачи от архитектора
```javascript
// Получаешь:
- План реализации
- Описание контрактов
- Точки интеграции
- Затронутые компоненты
```

### 2. Изучение контекста

**Всегда начинай с:**
1. Чтения существующего кода компонента
2. Изучения SAL-аннотаций для понимания контрактов
3. Проверки knowledge_graph для понимания зависимостей
4. Анализа integration_points

### 3. Реализация кода

**Структура реализации:**
```javascript
/**
 * === СИСТЕМНЫЕ КОНТРАКТЫ ===
 * @system_contract: Описание системного контракта
 * 
 * === КОМПОНЕНТНЫЕ КОНТРАКТЫ ===
 * @component_contract: Описание контракта компонента
 * 
 * === ФОРМАЛЬНЫЕ КОНТРАКТЫ ===
 * @requires: Что требуется для работы
 * @ensures: Что гарантируется после выполнения
 * @invariant: Что остается неизменным
 * @modifies: Что изменяется
 * 
 * === БИЗНЕСОВОЕ ОБОСНОВАНИЕ ===
 * @why_requires: Зачем нужно предусловие
 * @why_ensures: Зачем нужна гарантия
 * @business_impact: Что произойдет при нарушении
 */
export class MyComponent {
  /**
   * @requires: param1 валиден
   * @ensures: Возвращает результат
   */
  myMethod(param1) {
    // Реализация
  }
}
```

### 4. Соблюдение контрактов

**Критично:**
- ✅ Все @requires должны быть проверены
- ✅ Все @ensures должны быть выполнены
- ✅ Все @invariant должны поддерживаться
- ✅ Все события должны генерироваться через EventBus

### 5. Обновление документации

После реализации:
1. Обновить knowledge_graph если изменились контракты
2. Обновить directory_index_services.json если добавились компоненты
3. Проверить что SAL-аннотации актуальны

## Примеры работы

### Добавление нового метода

```javascript
// В StorageManager.js
/**
 * Сохранение настроек пользователя
 * @param {string} key - Ключ настройки
 * @param {*} value - Значение настройки
 * 
 * @requires: key непустая строка, value сериализуем в JSON
 * @ensures: Настройка сохранена в localStorage, генерируется событие 'settings:saved'
 * @modifies: localStorage ключ 'andlanceros', генерирует событие через EventBus
 * @why_ensures: Событие позволяет UI обновляться автоматически
 */
saveSetting(key, value) {
  const data = this.load();
  if (!data.settings) data.settings = {};
  data.settings[key] = value;
  this.save(data);
  this.eventBus.emit('settings:saved', { key, value });
  return true;
}
```

### Создание нового компонента

1. Создать файл с классом
2. Добавить полные SAL-аннотации
3. Обновить directory_index_services.json
4. Создать/обновить knowledge_graph/*.json
5. Добавить использование в main.js (если нужно)

## Важные принципы

1. **Контракты = код** - код должен материализовать контракты
2. **Минимум изменений** - меняй только необходимое
3. **Обратная совместимость** - не ломай существующий API
4. **События для интеграции** - используй EventBus для слабой связанности
5. **Обработка ошибок** - все ошибки должны быть обработаны

## Частые ошибки

❌ **Неправильно**: Игнорирование существующих контрактов
✅ **Правильно**: Изучение контрактов перед изменением

❌ **Неправильно**: Отсутствие SAL-аннотаций
✅ **Правильно**: Всегда добавлять аннотации для публичных методов

❌ **Неправильно**: Прямые зависимости вместо EventBus
✅ **Правильно**: Использовать EventBus для коммуникации
